import React,{useState,useEffect} from 'react';
import './App.css';

const INIT_TODOS=[
  {text:'Learn English',isComplete:false},
  {text:'Learn React',isComplete:false},
  {text:'Learn Redux',isComplete:false}
]

const CLICLE=<svg t="1593325175952" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1703" width="20" height="20"><path d="M512.00337692 223.62507194c-39.07811828 0-76.40824868 7.54812851-112.02349786 22.7966725-35.61524846 15.24854397-66.28448731 35.85361048-92.03419966 61.53711098-25.75633368 25.82254479-46.28194643 56.45205638-61.51062641 92.02757833-15.26178662 35.70794488-22.88274757 72.93213694-22.88274757 112.07646705 0 39.01190645 7.62096168 76.36852217 22.88274757 111.94404411 15.22868071 35.71456621 35.75429346 66.3440778 61.51062641 92.1666226 25.74971235 25.69012185 56.41895047 46.14952278 92.03419966 61.53049039a284.03475437 284.03475437 0 0 0 112.02349786 22.80329382c39.06487635 0 76.39500676-7.69379412 112.01025522-22.80329382 35.61524846-15.38096763 66.28448731-35.84698987 92.03419965-61.5304904 25.75633368-25.82254479 46.28194643-56.45205638 61.51062642-92.16662258 15.28827122-35.57552195 22.88274757-72.93213694 22.88274758-111.94404412 0-39.1443301-7.5944771-76.36852217-22.88274758-112.07646704-15.22868071-35.57552195-35.75429346-66.21165414-61.51062642-92.03419894-25.74971235-25.67687918-56.41895047-46.28194643-92.03419965-61.53049038C588.39838368 231.17982179 551.06163194 223.62507194 511.99675559 223.62507194m0-82.41364616c50.20167629 0 98.25809517 9.75297643 144.02359033 29.39797427 45.79860107 19.63837652 85.22764104 46.0104785 118.27387798 79.10968462 33.07272152 32.96678243 59.41833818 72.38920181 79.03023011 118.2606353 19.61851326 45.73901058 29.43770153 93.81529271 29.45094418 143.94413656 0.03972724 50.27450871-9.81918826 98.35079085-29.45094418 144.08980216-19.62513458 45.87143423-45.97075126 85.29385288-79.03023011 118.254014-33.03299426 33.10582743-72.43554966 59.47792868-118.27387797 79.12292725C610.19526027 872.88993219 562.19181056 882.78195289 512.00337692 882.78195289c-50.18843363 0-98.19188333-9.89202143-144.02359031-29.39797427-45.85157025-19.63837652-85.26736828-46.0104785-118.28712063-79.1096846C216.62656579 741.30751156 190.28757045 701.8850922 170.66243587 656.00703736 151.03068066 610.27464813 141.17176516 562.19836599 141.21149168 511.93047787c0.01324266-50.13546446 9.83243092-98.21174661 29.45094419-143.94413656 19.61189194-45.88467617 45.950888-85.3004742 79.03023011-118.26725664 33.0396156-33.10582743 72.47527689-59.47130809 118.28712063-79.11630594C413.73866043 150.96440221 461.78845799 141.21142578 511.99675559 141.21142578" p-id="1704" fill="#ffffff"></path></svg>
const FINISHED=<svg t="1593325328830" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2513" width="20" height="20"><path d="M520 992C259.728 992 48 780.256 48 520S259.728 48 520 48a468.72 468.72 0 0 1 275.248 88.528 24 24 0 0 1-28.032 38.976A420.832 420.832 0 0 0 520 96C286.208 96 96 286.208 96 520S286.208 944 520 944 944 753.792 944 520c0-53.6-9.856-105.808-29.28-155.184a24 24 0 1 1 44.656-17.584A469.712 469.712 0 0 1 992 520C992 780.256 780.272 992 520 992z m-90.976-263.584c-6.368 0-12.48-2.528-16.976-7.024L231.04 540.368a24 24 0 0 1 33.92-33.952l164.064 164.08L916.48 183.04a24 24 0 1 1 33.92 33.92L445.984 721.392a24.064 24.064 0 0 1-16.96 7.04z" fill="#ffffff" p-id="2514"></path></svg>
const REMOVE=<svg t="1593325452793" className="icon remove" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3289" width="20" height="20"><path d="M972.657609 209.348408C987.158609 209.36839 998.930114 197.571202 998.949999 182.99865 998.969882 168.426097 987.230618 156.59651 972.729617 156.576528L32.457975 155.280806C17.956974 155.260823 6.18547 167.058012 6.165585 181.630564 6.1457 196.203116 17.884965 208.032703 32.385966 208.052686L972.657609 209.348408ZM180.466902 992.356169 180.466902 1019.014859 206.993296 1018.74074 833.361858 1012.267947 859.348284 1011.999407 859.348284 985.883377 859.348284 289.397297C859.348284 274.824732 847.59289 263.011332 833.091874 263.011332 818.590859 263.011332 806.835465 274.824732 806.835465 289.397297L806.835465 985.883377 832.82189 959.498805 206.453329 965.971599 232.979723 992.356169 232.979723 282.67005C232.979723 268.097483 221.224329 256.284085 206.723313 256.284085 192.222298 256.284085 180.466902 268.097483 180.466902 282.67005L180.466902 992.356169ZM656.410257 847.079027C656.410257 861.651593 668.165651 873.464992 682.666667 873.464992 697.167682 873.464992 708.923076 861.651593 708.923076 847.079027L708.923076 372.131659C708.923076 357.559091 697.167682 345.745694 682.666667 345.745694 668.165651 345.745694 656.410257 357.559091 656.410257 372.131659L656.410257 847.079027ZM341.333333 847.079027C341.333333 861.651593 353.08873 873.464992 367.589743 873.464992 382.090758 873.464992 393.846155 861.651593 393.846155 847.079027L393.846155 372.131659C393.846155 357.559091 382.090758 345.745694 367.589743 345.745694 353.08873 345.745694 341.333333 357.559091 341.333333 372.131659L341.333333 847.079027ZM498.871795 847.079027C498.871795 861.651593 510.627189 873.464992 525.128205 873.464992 539.62922 873.464992 551.384614 861.651593 551.384614 847.079027L551.384614 372.131659C551.384614 357.559091 539.62922 345.745694 525.128205 345.745694 510.627189 345.745694 498.871795 357.559091 498.871795 372.131659L498.871795 847.079027ZM392.147755 116.721777C392.147755 102.063669 403.758665 90.363507 418.40134 90.363507L622.925796 90.363507C637.408947 90.363507 649.179381 102.1619 649.179381 116.549585L649.179381 171.644875 701.692203 171.644875 701.692203 116.549585C701.692203 72.986607 666.38105 37.591577 622.925796 37.591577L418.40134 37.591577C374.724427 37.591577 339.634933 72.950804 339.634933 116.721777L339.634933 165.310801 392.147755 165.310801 392.147755 116.721777Z" p-id="3290" fill="#ffffff"></path></svg>

function TodoFrom({addTodo}){
  const [value,setValue]=useState('');
  const handleSubmit=e=>{
    e.preventDefault();
    if(!value)return;
    addTodo(value);
    setValue('');
  }
  
  return (
    <form onSubmit={handleSubmit}> 
      <input 
      className="input"
      value={value}
      onChange={(e)=>setValue(e.target.value)}
      />
    </form>
  )
}

function Todo({todo,index,completeTodo,removeTodo}){
  return (
    <div className="task" onClick={()=>completeTodo(index)}>
      <div>
      {
        todo.isComplete?FINISHED:CLICLE
      }
      <div className="todo" style={{textDecoration: todo.isComplete?'line-through':''}}>{todo.text}</div>
      </div>
      <div className="remove" onClick={(e)=>removeTodo(e,index)}>
      {REMOVE}
      </div>
    </div>
  )
} 

function App() {
  const [todos,setTodos]=useState(JSON.parse(localStorage.getItem('todo'))||INIT_TODOS);

  useEffect(() => {
    localStorage.setItem('todo',JSON.stringify(todos))
  }, [todos])

  const addTodo=text=>{
    const newTodos=[{text},...todos];
    setTodos(newTodos);
  } 

  const completeTodo=index=>{
    const newTodos=[...todos];
    newTodos[index].isComplete=true;
    setTodos(newTodos);
  }

  const removeTodo=(e,index)=>{
    // e.stopPropagation();
    const newTodos=[...todos];
    newTodos.splice(index,1);
    setTodos(newTodos);
  }

  return (
    <div className="outer">
      <TodoFrom addTodo={addTodo}/>
      {
        todos.map((todo,index)=>(
        <Todo key={todo.text} todo={todo} index={index} completeTodo={completeTodo} removeTodo={removeTodo}/>
        ))
      }
    </div>
  );
}

export default App;
